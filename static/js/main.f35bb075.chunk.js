(this["webpackJsonpway-of-samurai"]=this["webpackJsonpway-of-samurai"]||[]).push([[3],[,,,,,function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r,a,s=n(63),o=n.n(s).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"321994fc-144a-4c0e-a36e-a2437572c56d"}});!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(r||(r={})),function(e){e[e.CaptchaIsRequired=10]="CaptchaIsRequired"}(a||(a={}))},,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(5),a={getUsersProfile:function(e){return r.c.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return r.c.get("profile/status/".concat(e)).then((function(e){return e.data}))},updateStatus:function(e){return r.c.put("profile/status",{status:e})},savePhoto:function(e){var t=new FormData;return t.append("image",e),r.c.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},saveProfileInfo:function(e){return r.c.put("profile",e)}}},,,function(e,t,n){e.exports={header:"Header_header__IwUb1",container:"Header_container__3GB8E",logo:"Header_logo__mbnhI",menuController:"Header_menuController__3R4j9",loginBlock:"Header_loginBlock__2518E",userLogin:"Header_userLogin__1ZD75"}},,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return O}));var r=n(1),a=n.n(r),s=n(3),o=n(2),c=n(5),u=function(){return c.c.get("auth/me").then((function(e){return e.data}))},i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return c.c.post("auth/login",{email:e,password:t,rememberMe:n,captcha:r})},l=function(){return c.c.delete("auth/login")},d=function(){return c.c.get("security/get-captcha-url").then((function(e){return e.data.url}))},p={userId:null,email:null,login:null,isAuth:!1,captchaUrl:null,isLoading:!1},f=function(e,t,n,r){return{type:"auth/SET_AUTH_USER_DATA",payload:{userId:e,email:t,login:n,isAuth:r}}},m=function(e){return{type:"auth/GET_CAPTCHA_URL",payload:{captchaUrl:e}}},b=function(){return{type:"auth/DELETE_CAPTCHA"}},h=function(e){return{type:"auth/SET_IS_LOADING",status:e}},g=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,s,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:(n=e.sent).data&&n.resultCode===c.a.Success&&(r=n.data,s=r.id,o=r.login,i=r.email,t(f(s,i,o,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(e,t,n,r){return function(){var o=Object(s.a)(a.a.mark((function s(o){var u;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o(h(!0)),a.next=3,i(e,t,n,r);case 3:if((u=a.sent).data.resultCode!==c.a.Success){a.next=12;break}return a.next=7,o(g());case 7:return o(b()),o(h(!1)),a.abrupt("return",Promise.resolve("Logged in"));case 12:if(o(h(!1)),u.data.resultCode!==c.b.CaptchaIsRequired){a.next=19;break}return a.next=16,o(E());case 16:return a.abrupt("return",Promise.reject("Need to write a captcha"));case 19:if(1!==u.data.resultCode){a.next=23;break}return a.abrupt("return",Promise.reject("Incorrect login or password"));case 23:return a.abrupt("return",Promise.reject("Server error"));case 24:case"end":return a.stop()}}),s)})));return function(e){return o.apply(this,arguments)}}()},E=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:n=e.sent,t(m(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:e.sent.data.resultCode===c.a.Success&&t(f(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_AUTH_USER_DATA":case"auth/GET_CAPTCHA_URL":return Object(o.a)({},e,{},t.payload);case"auth/DELETE_CAPTCHA":return Object(o.a)({},e,{captchaUrl:null});case"auth/SET_IS_LOADING":return Object(o.a)({},e,{isLoading:t.status});default:return e}}},function(e,t,n){"use strict";var r=n(37);t.a=function(e,t){Object(r.a)({targets:e,keyframes:[{opacity:1},{opacity:0}],duration:300,easing:"linear",loop:!1,complete:function(){t&&t()}})}},function(e,t,n){e.exports={mobileMenuContainer:"MobileMenu_mobileMenuContainer__1UmkP",mobileMenu:"MobileMenu_mobileMenu__2COii"}},,,,function(e,t,n){e.exports={navbar:"Navbar_navbar__30h2V",active:"Navbar_active__3RDi9"}},function(e,t,n){e.exports={modalContainer:"Modal_modalContainer__2no1k",modal:"Modal_modal__276LE",buttons:"Modal_buttons__3sTsI"}},,,,function(e,t,n){e.exports=n.p+"static/media/loader.9205748d.svg"},function(e,t,n){"use strict";var r=n(0),a=n.n(r),s=n(67),o=n.n(s),c=a.a.memo((function(e){var t=e.onClick;return a.a.createElement("div",{onClick:t,className:o.a.overlay})}));t.a=c},function(e,t,n){"use strict";var r=n(37);t.a=function(e,t){Object(r.a)({targets:e,keyframes:[{opacity:0},{opacity:1}],duration:300,easing:"linear",loop:!1,complete:function(){t&&t()}})}},,function(e,t,n){"use strict";var r=n(0),a=n.n(r),s=n(65),o=n.n(s),c=n(34),u=n.n(c),i=a.a.memo((function(){return a.a.createElement("div",{className:o.a.preloader},a.a.createElement("img",{src:u.a,alt:"preloader"}))}));t.a=i},function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c}));var r=function(e){return e.auth.userId},a=function(e){return e.auth.login},s=function(e){return e.auth.isAuth},o=function(e){return e.auth.captchaUrl},c=function(e){return e.auth.isLoading}},,,,,,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),s=n(69),o=n.n(s),c=n(34),u=n.n(c),i=a.a.memo((function(){return a.a.createElement("div",{className:o.a.preloader},a.a.createElement("img",{src:u.a,alt:"preloader"}))}));t.a=i},,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return g})),n.d(t,"f",(function(){return v})),n.d(t,"d",(function(){return E})),n.d(t,"e",(function(){return O}));var r=n(1),a=n.n(r),s=n(3),o=n(2),c=n(5),u=n(14),i={profile:null,isLoadingAvatar:!1,isLoadingProfileInfoChanges:!1,status:null,isLoadingStatus:!1},l=function(e){return{type:"profile/SET_USER_PROFILE",profile:e}},d=function(e){return{type:"profile/SET_USER_STATUS",status:e}},p=function(e){return{type:"profile/SAVE_PHOTO_SUCCESS",photos:e}},f=function(e){return{type:"profile/SET_IS_LOADING_STATUS",status:e}},m=function(e){return{type:"profile/SET_IS_LOADING_PROFILE_INFO_CHANGES",status:e}},b=function(e){return{type:"profile/SET_IS_LOADING_AVATAR",status:e}},h=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=7;break}return t.next=3,u.a.getUsersProfile(e);case 3:return r=t.sent,n(l(r)),t.next=7,n(g(e));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n(f(!0)),n(d(null)),!e){t.next=8;break}return t.next=5,u.a.getStatus(e);case 5:r=t.sent,n(d(r)),n(f(!1));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(f(!0)),t.next=3,u.a.updateStatus(e);case 3:if(r=t.sent,n(f(!1)),r.data.resultCode!==c.a.Success){t.next=10;break}return n(d(e)),t.abrupt("return",Promise.resolve("Status updated"));case 10:return t.abrupt("return",Promise.reject("Server error"));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(b(!0)),t.next=3,u.a.savePhoto(e);case 3:r=t.sent,n(b(!1)),r.resultCode===c.a.Success&&n(p(r.data.photos));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n,r){var s,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(m(!0)),t.next=3,r().auth.userId;case 3:return s=t.sent,t.next=6,u.a.saveProfileInfo(e);case 6:if(o=t.sent,n(m(!1)),0!==o.data.resultCode){t.next=15;break}if(!s){t.next=12;break}return t.next=12,n(h(s));case 12:return t.abrupt("return",Promise.resolve("Profile updated"));case 15:if(!o.data.messages){t.next=18;break}return console.log("reject"),t.abrupt("return",Promise.reject(o.data.messages[0]));case 18:return t.abrupt("return",Promise.reject("Server error"));case 19:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"profile/SET_USER_PROFILE":return Object(o.a)({},e,{profile:t.profile});case"profile/SET_USER_STATUS":return Object(o.a)({},e,{status:t.status});case"profile/SAVE_PHOTO_SUCCESS":return e.profile?Object(o.a)({},e,{profile:Object(o.a)({},e.profile,{photos:t.photos})}):e;case"profile/SET_IS_LOADING_STATUS":return Object(o.a)({},e,{isLoadingStatus:t.status});case"profile/SET_IS_LOADING_PROFILE_INFO_CHANGES":return Object(o.a)({},e,{isLoadingProfileInfoChanges:t.status});case"profile/SET_IS_LOADING_AVATAR":return Object(o.a)({},e,{isLoadingAvatar:t.status});default:return e}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"e",(function(){return b})),n.d(t,"d",(function(){return h}));var r=n(1),a=n.n(r),s=n(3),o=n(10),c=n(2),u={posts:[{id:1,likesCount:1,text:"OOP Typically depends on shared state. Objects and behaviors are typically tacked together on the same entity, which may be accessed at random by any number of functions with non-deterministic order, which may lead to undesirable behavior such as race conditions."},{id:2,likesCount:5,text:"It\u2019s easy to understand the basic concept of objects and easy to interpret the meaning of method calls. OOP tends to use an imperative style rather than a declarative style, which reads like a straight-forward set of instructions for the computer to follow."},{id:3,likesCount:2,text:"Using the functional paradigm, programmers avoid any shared state or side-effects, which eliminates bugs caused by multiple functions competing for the same resources. With features such as the availability of point-free style (aka tacit programming), functions tend to be radically simplified and easily recomposed for more generally reusable code compared to OOP."},{id:4,likesCount:40,text:"Over exploitation of FP features such as point-free style and large compositions can potentially reduce readability because the resulting code is often more abstractly specified, more terse, and less concrete.\n\nMore people are familiar with OO and imperative programming than functional programming, so even common idioms in functional programming can be confusing to new team members."}],maxPostId:4,likedPosts:[1,4]},i=function(e){return{type:"posts/ADD-POST",newPost:e}},l=function(e){return{type:"posts/DELETE_POST",postId:e}},d=function(e){return{type:"posts/LIKE_POST",postId:e}},p=function(e){return{type:"posts/DISLIKE_POST",postId:e}},f=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(i(e));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(l(e));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(d(e));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(p(e));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"posts/ADD-POST":return Object(c.a)({},e,{posts:[].concat(Object(o.a)(e.posts),[{id:e.maxPostId+1,text:t.newPost,likesCount:0}]),maxPostId:e.maxPostId+1});case"posts/DELETE_POST":for(var n=Object(o.a)(e.posts),r=0;r<n.length;r++)n[r].id===t.postId&&n.splice(r,1);return Object(c.a)({},e,{posts:n});case"posts/LIKE_POST":var a=e.likedPosts.some((function(e){return e===t.postId}));if(!a){var s=e.likedPosts;s.push(t.postId);for(var i=Object(o.a)(e.posts),l=0;l<i.length;l++)i[l].id===t.postId&&i[l].likesCount++;return Object(c.a)({},e,{likedPosts:s,posts:i})}return e;case"posts/DISLIKE_POST":var d=e.likedPosts.some((function(e){return e===t.postId}));if(d){for(var p=e.likedPosts.filter((function(e){return e!==t.postId})),f=Object(o.a)(e.posts),m=0;m<f.length;m++)f[m].id===t.postId&&f[m].likesCount--;return Object(c.a)({},e,{likedPosts:p,posts:f})}return e;default:return e}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"d",(function(){return m}));var r=n(1),a=n.n(r),s=n(3),o=n(10),c=n(2),u=n(14),i={currentDialogId:null,currentUser:null,messages:[{id:1,opponentId:2,date:158997264e4,from:"me",messageText:"Lorem ipsum dolor sit amet."},{id:2,opponentId:2,date:15899766e5,from:"opponent",messageText:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Corporis, veritatis."},{id:3,opponentId:2,date:15899796e5,from:"opponent",messageText:"Lorem ipsum, dolor sit amet consectetur adipisicing."},{id:4,opponentId:2,date:158998836e4,from:"me",messageText:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quibusdam tempora iste voluptatum veritatis eos quo, esse qui ipsam odio! Dicta?"},{id:5,opponentId:9,date:158998872e4,from:"me",messageText:"Lorem ipsum dolor sit amet."},{id:6,opponentId:11,date:158999418e4,from:"opponent",messageText:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Corporis, veritatis."},{id:7,opponentId:11,date:158999748e4,from:"opponent",messageText:"Lorem ipsum, dolor sit amet consectetur adipisicing."},{id:8,opponentId:12,date:158999784e4,from:"me",messageText:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quibusdam tempora iste voluptatum veritatis eos quo, esse qui ipsam odio! Dicta?"}],dialogs:[{id:1,opponentId:2},{id:2,opponentId:9},{id:3,opponentId:11},{id:4,opponentId:12}],users:[],isMessageFetching:!1,isMessagesLoading:!1},l={setCurrentDialogId:function(e){return{type:"dialogs/SET_CURRENT_DIALOG_ID",dialogId:e}},setCurrentUserSuccess:function(e){return{type:"dialogs/SET_CURRENT_USER",user:e}},sendMessageSuccess:function(e,t,n){return{type:"dialogs/SEND-MESSAGE",userId:e,newMessage:t,date:n}},setDialog:function(e){return{type:"dialogs/SET_DIALOG",userId:e}},setUsersSuccess:function(e){return{type:"dialogs/SET_USER",user:e}},setIsMessageFetching:function(e){return{type:"dialogs/MESSAGE_IS_FETCHING",status:e}},setIsMessagesLoading:function(e){return{type:"dialogs/SET_IS_MESSAGES_LOADING",status:e}}},d=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=11;break}return t.prev=1,t.next=4,u.a.getUsersProfile(e);case 4:r=t.sent,n(l.setUsersSuccess(r)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("No such user");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},p=function(e){return Object(s.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.a.getUsersProfile(e);case 3:return t.abrupt("return",!0);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))},f=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n(l.setIsMessagesLoading(!0)),!e){t.next=14;break}return t.prev=2,t.next=5,u.a.getUsersProfile(e);case 5:(r=t.sent).userId&&n(l.setCurrentUserSuccess(r)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),n(l.setCurrentUserSuccess(null));case 12:t.next=15;break;case 14:n(l.setCurrentUserSuccess(null));case 15:n(l.setIsMessagesLoading(!1));case 16:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},m=function(e,t,n){return function(){var r=Object(s.a)(a.a.mark((function r(s,o){var c,i,d;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=o(),i=c.dialogsPage.dialogs,s(l.setIsMessageFetching(!0)),d=!0,i.forEach((function(t){t.opponentId===e&&(d=!1)})),!d){r.next=9;break}return r.next=8,u.a.getUsersProfile(e);case 8:s(l.setDialog(e));case 9:s(l.sendMessageSuccess(e,t,n)),s(l.setIsMessageFetching(!1));case 11:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()};t.c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"dialogs/SET_CURRENT_DIALOG_ID":return Object(c.a)({},e,{currentDialogId:t.dialogId});case"dialogs/SET_CURRENT_USER":return Object(c.a)({},e,{currentUser:t.user});case"dialogs/SEND-MESSAGE":return Object(c.a)({},e,{messages:[].concat(Object(o.a)(e.messages),[{id:e.messages.length+1,opponentId:t.userId,date:t.date,from:"me",messageText:t.newMessage}])});case"dialogs/SET_DIALOG":return Object(c.a)({},e,{dialogs:[].concat(Object(o.a)(e.dialogs),[{id:e.dialogs.length+1,opponentId:t.userId}])});case"dialogs/SET_USER":return Object(c.a)({},e,{users:[].concat(Object(o.a)(e.users),[t.user])});case"dialogs/MESSAGE_IS_FETCHING":return Object(c.a)({},e,{isMessageFetching:t.status});case"dialogs/SET_IS_MESSAGES_LOADING":return Object(c.a)({},e,{isMessagesLoading:t.status});default:return e}}},function(e,t,n){"use strict";var r=n(1),a=n.n(r),s=n(3),o=n(18),c=n(19),u=n(21),i=n(20),l=n(0),d=n.n(l),p=n(16),f=n.n(p),m=n(30),b=n.n(m),h=n(46),g=n(35),v=n(36),E=n(24),O=function(e){Object(u.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).modalRef=d.a.createRef(),r.updateState=function(){r.setState({text:r.props.text||"Are you sure?",buttonSuccessText:r.props.buttonSuccessText||"Ok",buttonRejectText:r.props.buttonRejectText||"",callbackResolve:r.props.callbackResolve,callbackReject:r.props.callbackReject,callbackCancel:r.props.callbackReject})},r.cancelModal=function(){r.setState({isLoading:!0},Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.props.callbackCancel){e.next=3;break}return e.next=3,r.props.callbackCancel();case 3:null!==r.state.modal&&Object(E.a)(r.state.modal,r._closeModalCallback);case 4:case"end":return e.stop()}}),e)}))))},r.resolveModal=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.setState({isLoading:!0}),!r.state.callbackResolve){e.next=4;break}return e.next=4,r.state.callbackResolve();case 4:null!==r.state.modal&&Object(E.a)(r.state.modal,r._closeModalCallback);case 5:case"end":return e.stop()}}),e)}))),r.rejectModal=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.setState({isLoading:!0}),!r.state.callbackReject){e.next=4;break}return e.next=4,r.state.callbackReject();case 4:null!==r.state.modal&&Object(E.a)(r.state.modal,r._closeModalCallback);case 5:case"end":return e.stop()}}),e)}))),r._closeModalCallback=function(){r.props.setIsOpen(!1);var e=r.state.modal;null!==e&&(e.style.display="none")},r.state={text:r.props.text||"Are you sure?",buttonSuccessText:r.props.buttonSuccessText||"Ok",buttonRejectText:r.props.buttonRejectText||"",callbackResolve:r.props.callbackResolve,callbackReject:r.props.callbackReject,callbackCancel:r.props.callbackReject,modal:null,isLoading:!1},r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=document.getElementsByClassName(b.a.modalContainer);this.setState({modal:t[0]},(function(){null!==e.state.modal&&Object(v.a)(e.state.modal)}))}},{key:"componentDidUpdate",value:function(e,t){e!==this.props&&this.updateState()}},{key:"render",value:function(){return d.a.createElement("div",{ref:this.modalRef,className:b.a.modalContainer},d.a.createElement(g.a,{onClick:this.cancelModal}),d.a.createElement("div",{className:b.a.modal},d.a.createElement("span",null,this.state.text),d.a.createElement("div",{className:b.a.buttons},this.state.isLoading&&d.a.createElement(h.a,null),!!this.state.buttonSuccessText&&!this.state.isLoading&&d.a.createElement("div",{onClick:this.resolveModal,className:f()("button","button-success")},this.state.buttonSuccessText),!!this.state.buttonRejectText&&!this.state.isLoading&&d.a.createElement("div",{onClick:this.rejectModal,className:f()("button","button-normal")},this.state.buttonRejectText))))}}]),n}(d.a.PureComponent);t.a=O},function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"e",(function(){return b})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return v})),n.d(t,"f",(function(){return E}));var r=n(1),a=n.n(r),s=n(3),o=n(10),c=n(2),u=n(5),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return u.c.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},l=function(e){return u.c.post("follow/".concat(e),{}).then((function(e){return e.data}))},d=function(e){return u.c.delete("follow/".concat(e)).then((function(e){return e.data}))},p=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(c.a)({},e,{},r):e}))},f={users:[],totalUsersCount:0,isFetching:!1,followingInProgress:[],isLoading:!0},m={followSuccess:function(e){return{type:"users/FOLLOW",userId:e}},unfollowSuccess:function(e){return{type:"users/UNFOLLOW",userId:e}},setUsers:function(e){return{type:"users/SET-USERS",users:e}},setAddUsers:function(e){return{type:"users/SET_ADD_USERS",users:e}},setTotalUsersCount:function(e){return{type:"users/SET_TOTAL_USERS_COUNT",total:e}},toggleIsFetching:function(e){return{type:"users/TOGGLE_IS_FETCHING",isFetching:e}},setIsLoading:function(e){return{type:"users/SET_IS_LOADING",status:e}},toggleFollowingProgress:function(e,t){return{type:"users/TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}}},b=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){var s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(m.setIsLoading(!0)),n.next=3,i(e,t);case 3:s=n.sent,r(m.setUsers(s.items)),r(m.setTotalUsersCount(s.totalCount)),r(m.setIsLoading(!1));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},h=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){var s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(m.toggleIsFetching(!0)),n.next=3,i(e,t);case 3:return s=n.sent,r(m.setAddUsers(s.items)),r(m.toggleIsFetching(!1)),n.abrupt("return",Promise.resolve("Get users"));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},g=function(){var e=Object(s.a)(a.a.mark((function e(t,n,r,s){var o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(m.toggleFollowingProgress(!0,n)),e.next=3,r;case 3:if(o=e.sent,t(m.toggleFollowingProgress(!1,n)),o.resultCode!==u.a.Success){e.next=10;break}return t(s),e.abrupt("return",Promise.resolve("Followed / unfollowed"));case 10:return e.abrupt("return",Promise.reject("Server error"));case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),v=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(n,e,l(e),m.followSuccess(e));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(n,e,d(e),m.unfollowSuccess(e));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"users/FOLLOW":return Object(c.a)({},e,{users:p(e.users,t.userId,"id",{followed:!0})});case"users/UNFOLLOW":return Object(c.a)({},e,{users:p(e.users,t.userId,"id",{followed:!1})});case"users/SET-USERS":return Object(c.a)({},e,{users:t.users});case"users/SET_ADD_USERS":return Object(c.a)({},e,{users:[].concat(Object(o.a)(e.users),Object(o.a)(t.users))});case"users/SET_TOTAL_USERS_COUNT":return Object(c.a)({},e,{totalUsersCount:t.total});case"users/TOGGLE_IS_FETCHING":return Object(c.a)({},e,{isFetching:t.isFetching});case"users/SET_IS_LOADING":return Object(c.a)({},e,{isLoading:t.status});case"users/TOGGLE_IS_FOLLOWING_PROGRESS":return Object(c.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(o.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}}},,,,function(e,t,n){e.exports={preloader:"Preloader_preloader__1OWMd"}},function(e,t,n){e.exports=n.p+"static/media/menu.e2931d35.svg"},function(e,t,n){e.exports={overlay:"Overlay_overlay__3e1yK"}},function(e,t,n){e.exports={footer:"Footer_footer__2ztAT"}},function(e,t,n){e.exports={preloader:"PreloaderSmall_preloader__Yd-fv"}},,function(e,t,n){e.exports=n(100)},,,,,function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var r=n(0),a=n.n(r),s=n(31),o=n.n(s),c=(n(76),n(18)),u=n(19),i=n(21),l=n(20),d=(n(77),n(6)),p=n(8),f=n(26),m=n(15),b=n(1),h=n.n(b),g=n(3),v=n(2),E=n(23),O={initialized:!1,globalError:null},S={setInitial:function(){return{type:"app/SET_INITIAL"}},setGlobalError:function(e){return{type:"app/SET_GLOBAL_ERROR",error:e}}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/SET_INITIAL":return Object(v.a)({},e,{initialized:!0});case"app/SET_GLOBAL_ERROR":return Object(v.a)({},e,{globalError:t.error});default:return e}},I=function(e){return e.app.initialized},j=function(e){return e.app.globalError},y=n(64),x=n(57),T=n(58),w=n(59),k=n(61),L=Object(m.c)({app:_,profilePage:x.a,postsPage:T.b,dialogsPage:w.c,usersPage:k.b,auth:E.b}),C=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||m.d,P=Object(m.e)(L,C(Object(m.a)(y.a))),A=n(38),N=n(44),R=n(17),U=n.n(R),M=n(16),D=n.n(M),G=n(66),F=n.n(G),H=n(25),z=n.n(H),W=n(35),B=n(36),q=n(24),K=a.a.memo((function(e){var t=e.closeMobileMenu,n=Object(r.useRef)(null);return Object(r.useEffect)((function(){null!==n.current&&Object(B.a)(n.current)})),a.a.createElement("div",{ref:n,onClick:function(){n.current&&Object(q.a)(n.current,t)},className:z.a.mobileMenuContainer},a.a.createElement(W.a,null),a.a.createElement("nav",{className:z.a.mobileMenu},a.a.createElement(p.b,{to:"/profile",activeClassName:z.a.active},"Profile"),a.a.createElement(p.b,{to:"/dialogs",activeClassName:z.a.active},"Dialogs"),a.a.createElement(p.b,{to:"/users",activeClassName:z.a.active},"Users")))})),V=a.a.memo((function(e){var t=e.login,n=e.isAuth,s=e.logout,o=Object(r.useState)(!1),c=Object(N.a)(o,2),u=c[0],i=c[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",{className:"".concat(U.a.header)},a.a.createElement("div",{className:D()("width-wrapper",U.a.container)},a.a.createElement("a",{href:"/",className:"".concat(U.a.logo)},a.a.createElement("span",null,"AI")),a.a.createElement("div",{className:U.a.menuController,onClick:function(){i(!0)}},a.a.createElement("img",{src:F.a,alt:"menu controller"})),a.a.createElement("div",{className:U.a.loginBlock},!0===n&&a.a.createElement("div",null,a.a.createElement("span",{onClick:s,className:D()("button","button-normal",U.a.userLogin)},"Logout"),a.a.createElement(p.b,{to:"/profile",className:D()("button","button-success")},t)),!1===n&&a.a.createElement(p.b,{className:D()("button","button-success"),to:"/login"},"Login")))),u&&a.a.createElement(K,{closeMobileMenu:function(){i(!1)}}))})),J=n(39),Q=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isAuth,n=e.login,r=e.logout;return a.a.createElement(V,{isAuth:t,login:n,logout:r})}}]),n}(a.a.PureComponent),X={logout:E.d},Y=Object(f.b)((function(e){return{isAuth:Object(J.b)(e),login:Object(J.d)(e)}}),X)(Q),Z=n(29),$=n.n(Z),ee=a.a.memo((function(){return a.a.createElement("div",{className:$.a.navbar},a.a.createElement("nav",null,a.a.createElement(p.b,{to:"/profile",activeClassName:$.a.active},"Profile"),a.a.createElement(p.b,{to:"/dialogs",activeClassName:$.a.active},"Dialogs"),a.a.createElement(p.b,{to:"/users",activeClassName:$.a.active},"Users")))})),te=n(68),ne=n.n(te),re=a.a.memo((function(){return a.a.createElement("footer",{className:ne.a.footer})})),ae=n(60),se=a.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(6)]).then(n.bind(null,214))})),oe=a.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(8)]).then(n.bind(null,215))})),ce=a.a.lazy((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,216))})),ue=a.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(9)]).then(n.bind(null,217))})),ie=a.a.lazy((function(){return Promise.all([n.e(0),n.e(12)]).then(n.bind(null,211))})),le=a.a.lazy((function(){return Promise.all([n.e(0),n.e(11)]).then(n.bind(null,212))})),de=a.a.lazy((function(){return Promise.all([n.e(0),n.e(13)]).then(n.bind(null,213))})),pe=a.a.lazy((function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,155))})),fe=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={isModalOpen:!1},e.catchAllUnhandledErrors=function(t){e.setModalError(t.reason)},e.setModalError=function(t){e.setIsModalOpen(),e.props.setGlobalError(t)},e.setIsModalOpen=function(){e.setState({isModalOpen:!0})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp(),window.addEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"render",value:function(){return this.props.initialized?a.a.createElement("div",{className:"app"},this.state.isModalOpen&&a.a.createElement(ae.a,{text:this.props.globalError,buttonSuccessText:"Ok",isOpen:this.state.isModalOpen,setIsOpen:this.setIsModalOpen}),a.a.createElement(Y,null),a.a.createElement("div",{className:"main"},a.a.createElement("div",{className:"width-wrapper"},a.a.createElement("div",{className:"content-wrapper"},a.a.createElement(ee,null),a.a.createElement("div",{className:"content"},a.a.createElement(r.Suspense,{fallback:a.a.createElement(A.a,null)},a.a.createElement(d.d,null,a.a.createElement(d.b,{path:"/dialogs/:dialogId?",render:function(){return a.a.createElement(oe,null)}}),a.a.createElement(d.b,{path:"/profile/:userId?",render:function(){return a.a.createElement(se,null)}}),a.a.createElement(d.b,{path:"/users",render:function(){return a.a.createElement(ce,null)}}),a.a.createElement(d.b,{path:"/login",render:function(){return a.a.createElement(ue,null)}}),a.a.createElement(d.b,{path:"/news",render:function(){return a.a.createElement(ie,null)}}),a.a.createElement(d.b,{path:"/music",render:function(){return a.a.createElement(le,null)}}),a.a.createElement(d.b,{path:"/settings",render:function(){return a.a.createElement(de,null)}}),a.a.createElement(d.b,{exact:!0,path:"/"}," ",a.a.createElement(d.a,{to:"/profile"})," "),a.a.createElement(d.b,{path:"*",render:function(){return a.a.createElement(pe,{h1:"Page not found",h2:"Sorry, we have lost this page, but... our best detectives are already looking for it!",linkUrl:"/users",linkText:"Get another try"})}}))))))),a.a.createElement(re,null)):a.a.createElement("div",{className:"preloader-container"},a.a.createElement(A.a,null))}}]),n}(a.a.PureComponent),me={initializeApp:function(){return function(){var e=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(Object(E.a)());case 2:t(S.setInitial());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setGlobalError:S.setGlobalError},be=Object(m.d)(d.g,Object(f.b)((function(e){return{initialized:I(e),globalError:j(e)}}),me))(fe),he=function(){return a.a.createElement(p.a,null,a.a.createElement(f.a,{store:P},a.a.createElement(be,null)))};o.a.render(a.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[71,4,5]]]);
//# sourceMappingURL=main.f35bb075.chunk.js.map